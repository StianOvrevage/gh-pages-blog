<!doctype html><html lang=en-us dir=ltr><head><meta charset=utf-8><meta name=viewport content='width=device-width,initial-scale=1'><meta name=description content="In this post we will set up a managed Kubernetes cluster from scratch using Azure CLI."><title>Managed Kubernetes on Microsoft Azure (English)</title>
<link rel=canonical href=https://blog.stian.omg.lol/p/managed-kubernetes-on-microsoft-azure-english/><link rel=stylesheet href=/scss/style.min.663803bebe609202d5b39d848f2d7c2dc8b598a2d879efa079fa88893d29c49c.css><meta property='og:title' content="Managed Kubernetes on Microsoft Azure (English)"><meta property='og:description' content="In this post we will set up a managed Kubernetes cluster from scratch using Azure CLI."><meta property='og:url' content='https://blog.stian.omg.lol/p/managed-kubernetes-on-microsoft-azure-english/'><meta property='og:site_name' content='blog.stian.omg.lol'><meta property='og:type' content='article'><meta property='article:section' content='Post'><meta property='article:tag' content='kubernetes'><meta property='article:tag' content='azure'><meta property='article:published_time' content='2017-12-29T00:00:00+00:00'><meta property='article:modified_time' content='2017-12-29T00:00:00+00:00'><meta property='og:image' content='https://blog.stian.omg.lol/p/managed-kubernetes-on-microsoft-azure-english/2017-12-23-managed-kubernetes-on-azure-eng.png'><meta name=twitter:title content="Managed Kubernetes on Microsoft Azure (English)"><meta name=twitter:description content="In this post we will set up a managed Kubernetes cluster from scratch using Azure CLI."><meta name=twitter:card content="summary_large_image"><meta name=twitter:image content='https://blog.stian.omg.lol/p/managed-kubernetes-on-microsoft-azure-english/2017-12-23-managed-kubernetes-on-azure-eng.png'><link rel="shortcut icon" href=/favicon.png></head><body class=article-page><script>(function(){const e="StackColorScheme";localStorage.getItem(e)||localStorage.setItem(e,"auto")})()</script><script>(function(){const t="StackColorScheme",e=localStorage.getItem(t),n=window.matchMedia("(prefers-color-scheme: dark)").matches===!0;e=="dark"||e==="auto"&&n?document.documentElement.dataset.scheme="dark":document.documentElement.dataset.scheme="light"})()</script><div class="container main-container flex on-phone--column extended"><aside class="sidebar left-sidebar sticky"><button class="hamburger hamburger--spin" type=button id=toggle-menu aria-label="Toggle Menu">
<span class=hamburger-box><span class=hamburger-inner></span></span></button><header><figure class=site-avatar><a href=/><img src=/img/profile-picture_hu6892409687065925510.jpg width=300 height=300 class=site-logo loading=lazy alt=Avatar>
</a><span class=emoji>ü§∑‚Äç‚ôÇÔ∏è</span></figure><div class=site-meta><h1 class=site-name><a href=/>blog.stian.omg.lol</a></h1><h2 class=site-description>Technology. Aviation. Philosophy.</h2></div></header><ol class=menu-social><li><a href=https://github.com/StianOvrevage target=_blank title=GitHub rel=me><svg class="icon icon-tabler icon-tabler-brand-github" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M9 19c-4.3 1.4-4.3-2.5-6-3m12 5v-3.5c0-1 .1-1.4-.5-2 2.8-.3 5.5-1.4 5.5-6a4.6 4.6.0 00-1.3-3.2 4.2 4.2.0 00-.1-3.2s-1.1-.3-3.5 1.3a12.3 12.3.0 00-6.2.0C6.5 2.8 5.4 3.1 5.4 3.1a4.2 4.2.0 00-.1 3.2A4.6 4.6.0 004 9.5c0 4.6 2.7 5.7 5.5 6-.6.6-.6 1.2-.5 2V21"/></svg></a></li></ol><ol class=menu id=main-menu><li><a href=/><svg class="icon icon-tabler icon-tabler-home" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><polyline points="5 12 3 12 12 3 21 12 19 12"/><path d="M5 12v7a2 2 0 002 2h10a2 2 0 002-2v-7"/><path d="M9 21v-6a2 2 0 012-2h2a2 2 0 012 2v6"/></svg>
<span>Home</span></a></li><li><a href=/archives/><svg class="icon icon-tabler icon-tabler-archive" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><rect x="3" y="4" width="18" height="4" rx="2"/><path d="M5 8v10a2 2 0 002 2h10a2 2 0 002-2V8"/><line x1="10" y1="12" x2="14" y2="12"/></svg>
<span>Archives</span></a></li><li><a href=/search/><svg class="icon icon-tabler icon-tabler-search" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><circle cx="10" cy="10" r="7"/><line x1="21" y1="21" x2="15" y2="15"/></svg>
<span>Search</span></a></li><li><a href=/links/><svg class="icon icon-tabler icon-tabler-link" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><path d="M10 14a3.5 3.5.0 005 0l4-4a3.5 3.5.0 00-5-5l-.5.5"/><path d="M14 10a3.5 3.5.0 00-5 0l-4 4a3.5 3.5.0 005 5l.5-.5"/></svg>
<span>Links</span></a></li><li class=menu-bottom-section><ol class=menu><li id=dark-mode-toggle><svg class="icon icon-tabler icon-tabler-toggle-left" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><circle cx="8" cy="12" r="2"/><rect x="2" y="6" width="20" height="12" rx="6"/></svg>
<svg class="icon icon-tabler icon-tabler-toggle-right" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><circle cx="16" cy="12" r="2"/><rect x="2" y="6" width="20" height="12" rx="6"/></svg>
<span>Dark Mode</span></li></ol></li></ol></aside><aside class="sidebar right-sidebar sticky"><section class="widget archives"><div class=widget-icon><svg class="icon icon-tabler icon-tabler-hash" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><line x1="5" y1="9" x2="19" y2="9"/><line x1="5" y1="15" x2="19" y2="15"/><line x1="11" y1="4" x2="7" y2="20"/><line x1="17" y1="4" x2="13" y2="20"/></svg></div><h2 class="widget-title section-title">Table of contents</h2><div class=widget--toc><nav id=TableOfContents><ol><li><ol><li><ol><li><a href=#microsoft-azure>Microsoft Azure</a></li></ol></li></ol></li><li><a href=#background>Background</a><ol><li><a href=#docker-containers>Docker containers</a><ol><li><a href=#container-orchestration>Container orchestration</a></li></ol></li></ol></li><li><a href=#getting-started-with-azure-kubernetes---aks>Getting started with Azure Kubernetes - AKS</a><ol><li><a href=#caveats>Caveats</a></li><li><a href=#preparations>Preparations</a></li><li><a href=#azure-login>Azure login</a></li><li><a href=#activate-containerservice>Activate ContainerService</a></li><li><a href=#create-a-resource-group>Create a resource group</a></li><li><a href=#create-kubernetes-cluster>Create Kubernetes cluster</a></li><li><a href=#install-kubectl>Install kubectl</a></li><li><a href=#inspect-cluster>Inspect cluster</a></li><li><a href=#start-some-nginx-containers>Start some nginx containers</a></li><li><a href=#making-nginx-available-with-a-service>Making nginx available with a service</a></li><li><a href=#scaling-the-cluster>Scaling the cluster</a></li><li><a href=#delete-cluster>Delete cluster</a></li></ol></li><li><a href=#bonus-material>Bonus material</a><ol><li><a href=#deploying-services-with-helm>Deploying services with Helm</a><ol><li><a href=#deploy-minecraft-with-helm>Deploy MineCraft with Helm</a></li></ol></li><li><a href=#kubernetes-dashboard>Kubernetes Dashboard</a></li></ol></li><li><a href=#conclusion>Conclusion</a></li></ol></nav></div></section></aside><main class="main full-width"><article class="has-image main-article"><header class=article-header><div class=article-image><a href=/p/managed-kubernetes-on-microsoft-azure-english/><img src=/p/managed-kubernetes-on-microsoft-azure-english/2017-12-23-managed-kubernetes-on-azure-eng_hu16663104706739538126.png srcset="/p/managed-kubernetes-on-microsoft-azure-english/2017-12-23-managed-kubernetes-on-azure-eng_hu16663104706739538126.png 800w, /p/managed-kubernetes-on-microsoft-azure-english/2017-12-23-managed-kubernetes-on-azure-eng_hu1452018469364866544.png 1600w" width=800 height=457 loading=lazy alt="Featured image of post Managed Kubernetes on Microsoft Azure (English)"></a></div><div class=article-details><header class=article-category><a href=/categories/technology/ style=background-color:#2a9d8f;color:#fff>Technology</a></header><div class=article-title-wrapper><h2 class=article-title><a href=/p/managed-kubernetes-on-microsoft-azure-english/>Managed Kubernetes on Microsoft Azure (English)</a></h2><h3 class=article-subtitle>In this post we will set up a managed Kubernetes cluster from scratch using Azure CLI.</h3></div><footer class=article-time><div><svg class="icon icon-tabler icon-tabler-calendar-time" width="56" height="56" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><path d="M11.795 21H5a2 2 0 01-2-2V7a2 2 0 012-2h12a2 2 0 012 2v4"/><circle cx="18" cy="18" r="4"/><path d="M15 3v4"/><path d="M7 3v4"/><path d="M3 11h16"/><path d="M18 16.496V18l1 1"/></svg>
<time class=article-time--published>Dec 29, 2017</time></div><div><svg class="icon icon-tabler icon-tabler-clock" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><circle cx="12" cy="12" r="9"/><polyline points="12 7 12 12 15 15"/></svg>
<time class=article-time--reading>13 minute read</time></div></footer></div></header><section class=article-content><p><em>A few days ago I wrote a walkthrough of <a class=link href=/2017/12/25/managed-kubernetes-on-azure.html>setting up Azure Container Service (AKS) in Norwegian</a>. Someone asked me for an English version of that, and here it is.</em></p><p>Kubernetes(K8s) is becoming the de-facto standard for deploying container-based applications and workloads. Microsoft is currently in preview of their managed Kubernetes offering (Azure Kubernetes Service, AKS) which makes it easy to create a Kubernetes cluster and deploy workloads without the skill and time required to manage day-to-day operations of a Kubernetes-cluster, which today can be complex and time consuming.</p><p>In this post we will set up a Kubernetes cluster from scratch using Azure CLI.</p><p>Table of contents</p><ul><li><a class=link href=#Background>Background</a><ul><li><a class=link href=#Dockercontainers>Docker containers</a></li><li><a class=link href=#Containerorchestration>Container orchestration</a></li></ul></li><li><a class=link href=#QuickstartAKS>Getting started with Azure Kubernetes - AKS</a><ul><li><a class=link href=#Caveats>Caveats</a></li><li><a class=link href=#Preparations>Preparations</a></li><li><a class=link href=#AzureLogin>Azure login</a></li><li><a class=link href=#ActivateContainerService>Activate ContainerService</a></li><li><a class=link href=#CreateResourceGroup>Create a resource group</a></li><li><a class=link href=#CreateK8sCluster>Create a Kubernetes cluster</a></li><li><a class=link href=#InstallKubectl>Install kubectl</a></li><li><a class=link href=#InspectCluster>Inspect cluster</a></li><li><a class=link href=#StartNginx>Start some nginx containere</a></li><li><a class=link href=#NginxService>Making nginx available with a service</a></li><li><a class=link href=#ScaleCluster>Scale cluster</a></li><li><a class=link href=#DeleteCluster>Delete cluster</a></li></ul></li><li><a class=link href=#Bonusmaterial>Bonus material</a><ul><li><a class=link href=#HelmIntro>Deploying services with Helm</a><ul><li><a class=link href=#HelmMinecraft>Deploy MineCraft with Helm</a></li></ul></li><li><a class=link href=#KubernetesDashboard>Kubernetes Dashboard</a></li></ul></li><li><a class=link href=#Conclusion>Conclusion</a></li></ul><h4 id=microsoft-azure>Microsoft Azure</h4><blockquote><p><a class=link href=https://azure.microsoft.com/en-us/free/ target=_blank rel=noopener>If you don&rsquo;t have a Azure subscription already you can try services for $200 for 30 days.</a> The VM size <strong>Standard_B2s</strong> is Burstable, has 2vCPU, 4GB RAM, 8GB temp storage and costs roughly $38 / month. For $200 you can have a cluster of 3-4 B2s nodes plus traffic, loadbalancers and other additional costs.</p></blockquote><blockquote><p><em>We have no affiliation with Microsoft Azure except their sponsorship of our startup <a class=link href=http://www.datadynamics.no/ target=_blank rel=noopener>DataDynamics</a> with cloud services for 24 months in their <a class=link href=https://bizspark.microsoft.com/ target=_blank rel=noopener>BizSpark program</a>.</em></p></blockquote><p><a id=Background></a></p><h2 id=background>Background</h2><p><a id=Dockercontainers></a></p><h3 id=docker-containers>Docker containers</h3><p><em>We will not do a deep dive on Docker containers in this post, but here is a summary for those who are not familiar with it.</em></p><p>Docker is a way to package software so that it can run on the most popular platforms without worrying about installation, dependencies and to a certain degree, configuration.</p><p>In addition, a Docker container uses the operating system of the host machine when it runs. Because of this it&rsquo;s possible to run many more containers on the same host machine compared to running virtual machines.</p><p>Here is a incomplete and rough comparison between a Docker container and a virtual machine:</p><div class=table-wrapper><table><thead><tr><th></th><th>Virtual machine</th><th>Docker container</th></tr></thead><tbody><tr><td>Image size</td><td>from 200MB to many GB</td><td>from 10MB to 3-400MB</td></tr><tr><td>Startup time</td><td>60 seconds +</td><td>1-10 seconds</td></tr><tr><td>Memory usage</td><td>256MB-512MB-1GB +</td><td>2MB +</td></tr><tr><td>Security</td><td>Good isolation between VMs</td><td>Not as good isolation between containers</td></tr><tr><td>Building image</td><td>Minutes</td><td>Seconds</td></tr></tbody></table></div><blockquote><p><strong>PS</strong> The numbers for virtual machines is taken from memory. I tried starting a MySQL virtual appliance on my laptop but VMware Player refuses to run because of Windows Hyper-V incompatibility. VMware Workstation refuses to run because of license issues and Oracle VirtualBox repeatedly gives me a nasty bluescreen. Hooray!</p></blockquote><blockquote><p><strong>Protip</strong> The smallest and fastest Docker images are built on Alpine Linux. For the webserver Nginx the Alpine-based image is 15MB compared to 108MB for the normal Debian-based image. PostgreSQL:Alpine is 38MB compared to 287MB with &ldquo;full&rdquo; OS. Last version of MySQL is 343MB but will in version 8 support Alpine Linux as well.</p></blockquote><p>To recap, some of the advantages of Docker containers are:</p><ul><li>Compatibility across platforms, Linux, Windows, MacOS.</li><li>10-100x smaller size. Faster to download, build and upload.</li><li>Memory usage only for application and not base OS.<ul><li>Advantage when developing. Ability to run 10-20-30 containers on a development laptop.</li><li>Advantage in production. Can reduce hardware/cloud costs considerably.</li></ul></li><li>Near instant startup. Makes dynamic scaling of applications easier.</li></ul><p><a class=link href=https://store.docker.com/editions/community/docker-ce-desktop-windows target=_blank rel=noopener>Download Docker for Windows here.</a></p><p>To start a MySQL database container from Windows CMD or Powershell:</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=cl>docker run --name mysql -p 3306:3306 -e MYSQL_RANDOM_ROOT_PASSWORD=true mysql
</span></span></code></pre></td></tr></table></div></div><p>Stop the container with:</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=cl>docker kill mysql
</span></span></code></pre></td></tr></table></div></div><p>You can search for already built Docker images on <a class=link href=https://hub.docker.com/ target=_blank rel=noopener>Docker Hub</a>. It&rsquo;s also possible to create private Docker repositories for your own software that you don&rsquo;t want to be publicly available.</p><p><a id=Containerorchestration></a></p><h4 id=container-orchestration>Container orchestration</h4><p>Now that Docker container images has become the preferred way to package and distribute software on the Linux platform, there has emerged a need for systems to coordinate running and deploying these containers. Similar to the ecosystem of products VMware has built up around development and operation of virtual machines.</p><p>Container orchestration systems have the responsibility for:</p><ul><li>Load balancing.</li><li>Service discovery.</li><li>Health checks.</li><li>Automatic scaling and restarting of host nodes and containers.</li><li>Zero downtime upgrades (rolling deploys).</li></ul><p>Until recently the ecosystem around container orchestration has been fragmented, and the most popular alternatives have been:</p><ul><li><a class=link href=https://kubernetes.io/ target=_blank rel=noopener>Kubernetes</a> (Originaly from Google, now managed by CNCF, the Cloud Native Computing Foundation)</li><li><a class=link href=https://docs.docker.com/engine/swarm/ target=_blank rel=noopener>Swarm</a> (From the maker of Docker)</li><li><a class=link href=http://mesos.apache.org/ target=_blank rel=noopener>Mesos</a> (From Apache Software Foundation)</li><li><a class=link href=https://github.com/coreos/fleet target=_blank rel=noopener>Fleet</a> (From CoreOS)</li></ul><p>But the last year there has been a convergence towards Kubernetes as the preferred solution.</p><ul><li>7 February<ul><li><a class=link href=https://coreos.com/blog/migrating-from-fleet-to-kubernetes.html target=_blank rel=noopener>CoreOS announces that they are removing Fleet from Container Linux and recommends Kubernetes</a></li></ul></li><li>27 July<ul><li><a class=link href=https://azure.microsoft.com/en-us/blog/announcing-cncf/ target=_blank rel=noopener>Microsoft joins the CNCF</a></li></ul></li><li>9 August<ul><li><a class=link href=https://techcrunch.com/2017/08/09/aws-joins-the-cloud-native-computing-foundation/ target=_blank rel=noopener>Amazon Web Services join the CNCF</a></li></ul></li><li>29 August<ul><li><a class=link href=https://www.geekwire.com/2017/now-vmware-pivotal-cncf-becoming-hub-enterprise-tech/ target=_blank rel=noopener>VMware and Pivotal joins the CNCF</a></li></ul></li><li>17 September<ul><li><a class=link href=https://techcrunch.com/2017/09/13/oracle-joins-the-cloud-native-computing-foundation-as-a-platinum-member/ target=_blank rel=noopener>Oracle joins the CNCF</a></li></ul></li><li>17 October<ul><li><a class=link href=https://www.theregister.co.uk/2017/10/17/docker_ee_kubernetes_support/ target=_blank rel=noopener>Docker announces native support for Kubernetes in addition to it&rsquo;s own Swarm product</a></li></ul></li><li>24 October<ul><li><a class=link href=https://azure.microsoft.com/en-us/blog/introducing-azure-container-service-aks-managed-kubernetes-and-azure-container-registry-geo-replication/ target=_blank rel=noopener>Microsoft Azure announces the managed Kubernetes service AKS</a></li></ul></li><li>29 November<ul><li><a class=link href=https://aws.amazon.com/blogs/aws/amazon-elastic-container-service-for-kubernetes/ target=_blank rel=noopener>Amazon Web Services announces the managed Kubernetes service EKS</a></li></ul></li></ul><p>Especially the last two news items are important. Deploying and running your own Kubernetes-installation requires time and skills (<a class=link href=https://stripe.com/blog/operating-kubernetes target=_blank rel=noopener>Read how Stripe used 5 months to trust running Kubernetes in production, just for batch jobs.</a>)</p><p>Until now the choice has been running your own Kubernetes cluster or using Google Container Engine which has been <a class=link href=https://cloudplatform.googleblog.com/2014/11/unleashing-containers-and-kubernetes-with-google-compute-engine.html target=_blank rel=noopener>using Kubernetes since 2014</a>. Many of us feel a certain discomfort by locking ourselves to one provider. But this is now changing when you can develop infrastructure on Kubernetes and choose between the 3 large cloud providers in addition to running your own cluster if wanted. <strong>*</strong></p><p><strong>*</strong> Kubernetes is a fast moving project, and features might be available on the different platforms on different timelines.</p><p><a id=QuickstartAKS></a></p><h2 id=getting-started-with-azure-kubernetes---aks>Getting started with Azure Kubernetes - AKS</h2><p><a id=Caveats></a></p><h3 id=caveats>Caveats</h3><blockquote><p>This guide is based on the documentation on <a class=link href=https://docs.microsoft.com/en-us/azure/aks/kubernetes-walkthrough target=_blank rel=noopener>Microsoft.com</a>. Setting up a Azure Kubernetes cluster did not work in the beginning of December, but today, 23. December, it seems to work fairly well. But, upgrading the cluster from Kubernetes 1.7 to 1.8 for example does NOT work.</p><p>AKS is in Preview and Azure are working continuously to make AKS stable and to support as many Kubernetes-features as possible. Amazon Web Services has a similar closed invite-only Preview currently while working on stability and features.</p><p>Both Azure and AWS expresses expectations about their Kubernetes offerings will be ready for production in 2018.</p></blockquote><p><a id=Preparations></a></p><h3 id=preparations>Preparations</h3><p>You need Azure-CLI (version 2.0.21 or newer) to execute the <code>az</code> commands:</p><ul><li><a class=link href=https://aka.ms/InstallAzureCliWindows target=_blank rel=noopener>Download Azure-CLI here</a></li><li><a class=link href="https://docs.microsoft.com/en-us/cli/azure/install-azure-cli?view=azure-cli-latest" target=_blank rel=noopener>Information about Azure-CLI on MacOS and Linux here</a></li></ul><p>All commands executed in Windows PowerShell.</p><p><a id=AzureLogin></a></p><h3 id=azure-login>Azure login</h3><p>Log on to Azure:</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=cl>az login
</span></span></code></pre></td></tr></table></div></div><p>You will get a link to open in your browser together with an authentication code. Enter the code on the webpage and <code>az login</code> will save the login information so that you will not have to authenticate again on the same machine.</p><blockquote><p><strong>PS</strong> The login information gets saved in <code>C:\Users\Username\.azure\</code>. You have to make sure nobody can access these files. They will then have full access to your Azure account.</p></blockquote><p><a id=ActivateContainerService></a></p><h3 id=activate-containerservice>Activate ContainerService</h3><p>Since AKS is in Preview/Beta, you explicitly have to activate it in your subscription to get access to the <code>aks</code> subcommands.</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=cl>az provider register -n Microsoft.ContainerService
</span></span><span class=line><span class=cl>az provider show -n Microsoft.ContainerService
</span></span></code></pre></td></tr></table></div></div><p><a id=CreateResourceGroup></a></p><h3 id=create-a-resource-group>Create a resource group</h3><p>Here we create a resource group named &ldquo;my_aks_rg&rdquo; in Azure region West Europe.</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=cl>az group create --name my_aks_rg --location westeurope
</span></span></code></pre></td></tr></table></div></div><blockquote><p><strong>Protip</strong>
To see a list of all available Azure regions, use the command <code>az account list-locations --output table</code>. <strong>PS</strong> AKS might not be available in all regions yet!</p></blockquote><p><a id=CreateK8sCluster></a></p><h3 id=create-kubernetes-cluster>Create Kubernetes cluster</h3><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=cl>az aks create --resource-group my_aks_rg --name my_cluster --node-count 3 --generate-ssh-keys --node-vm-size Standard_B2s --node-osdisk-size 128 --kubernetes-version 1.8.2
</span></span></code></pre></td></tr></table></div></div><ul><li><code>--node-count</code><ul><li>Number of agent(host) nodes available to run containers</li></ul></li><li><code>--generate-ssh-keys</code><ul><li>Creates and prints a SSH key which can be used for SSHing directly to the agent nodes.</li></ul></li><li><code>--node-vm-size</code><ul><li>Which size Azure VMs the agent nodes should be created as. To see available sizes use <code>az vm list-sizes -l westeurope --output table</code> and <a class=link href=https://docs.microsoft.com/en-us/azure/virtual-machines/linux/sizes target=_blank rel=noopener>Microsofts webpages</a>.</li></ul></li><li><code>--node-osdisk-size</code><ul><li>Disk size of the agent nodes in GB. <strong>PS</strong> Containers can be stopped and moved to another host if Kubernetes finds it necessary or if a agent node disappears. All data saved locally in the container will be gone. If saving data permanently use Kubernetes PersistentVolumes and not the local agent node or container disks.</li></ul></li><li><code>--kubernetes-version</code><ul><li>Which Kubernetes version to install. Azure does NOT necessarily install the last version by default, and currently upgrading with <code>az aks upgrade</code> does not work. Latest version available right now is 1.8.2. It&rsquo;s recommended to use the latest available version since there is a lot of changes from version to version. The documentation is also much better for newer versions.</li></ul></li></ul><p>Save the output of the command in a file in a secure location. It contains keys that can be used to connect to the cluster with SSH. Even though that should not in theory be necessary.</p><p><a id=InstallKubectl></a></p><h3 id=install-kubectl>Install kubectl</h3><p><code>kubectl</code> is the client which performs all operations against your Kubernetes cluster. Azure CLI can install <code>kubectl</code> for you:</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=cl>az aks install-cli
</span></span></code></pre></td></tr></table></div></div><p>After <code>kubectl</code> is installed we need to get login information so that <code>kubectl</code> can communicate with the Kubernetes cluster.</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=cl>az aks get-credentials --resource-group my_aks_rg --name my_cluster
</span></span></code></pre></td></tr></table></div></div><p>The login information is saved in <code>C:\Users\Username\.kube\config</code>. Keep these files secure as well.</p><blockquote><p><strong>Protip</strong> When you have several Kubernetes clusters you can change which one <code>kubectl</code> talks to with <code>kubectl config get-contexts</code> and <code>kubectl config set-context my_cluster</code>.</p></blockquote><p><a id=InspectCluster></a></p><h3 id=inspect-cluster>Inspect cluster</h3><p>To check that the cluster and <code>kubectl</code> works we start with a couple of commands.</p><p>See all agent nodes and status:</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=cl>&gt; kubectl get nodes
</span></span><span class=line><span class=cl>NAME                       STATUS    AGE       VERSION
</span></span><span class=line><span class=cl>aks-nodepool1-16970026-0   Ready     15m       v1.8.2
</span></span><span class=line><span class=cl>aks-nodepool1-16970026-1   Ready     15m       v1.8.2
</span></span><span class=line><span class=cl>aks-nodepool1-16970026-2   Ready     15m       v1.8.2
</span></span></code></pre></td></tr></table></div></div><p>See all services, pods and deployments:</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=cl>&gt; kubectl get all --all-namespaces
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>NAMESPACE     NAME                                          READY     STATUS    RESTARTS   AGE
</span></span><span class=line><span class=cl>kube-system   po/kubernetes-dashboard-6fc8cf9586-frpkn      1/1       Running   0          3d
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>NAMESPACE     NAME                          CLUSTER-IP     EXTERNAL-IP     PORT(S)           AGE
</span></span><span class=line><span class=cl>kube-system   svc/kubernetes-dashboard      10.0.161.132   &lt;none&gt;          80/TCP            3d
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>NAMESPACE     NAME                             DESIRED   CURRENT   UP-TO-DATE   AVAILABLE   AGE
</span></span><span class=line><span class=cl>kube-system   deploy/kubernetes-dashboard      1         1         1            1           3d
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>NAMESPACE     NAME                                    DESIRED   CURRENT   READY     AGE
</span></span><span class=line><span class=cl>kube-system   rs/kubernetes-dashboard-6fc8cf9586      1         1         1         3d
</span></span></code></pre></td></tr></table></div></div><p>This is just some of the output from this command. You do not have to know what the resources in the <code>kube-system</code> namespace does. That is part of the intention when Microsoft is managing our cluster for us.</p><blockquote><p><strong>Namespaces</strong>
In Kubernetes there is something called Namespaces. Resources in one namespace does not have automatic access to resources in another namespace. The services that runs Kubernetes itself use the namespace <code>kube-system</code>. The <code>kubectl</code> command by default only shows you resources in the <code>default</code> namespace, unless you specify <code>--all-namespaces</code> or <code>--namespace=xx</code>.</p></blockquote><p><a id=StartNginx></a></p><h3 id=start-some-nginx-containers>Start some nginx containers</h3><blockquote><p>An instance of a running container in Kubernetes is called a <strong>Pod</strong>.</p></blockquote><blockquote><p><code>nginx</code> is a fast and flexible web server.</p></blockquote><p>Now that the clsuter is up we can start rolling out services and deployments on it.</p><p>Lets start with creating a Deployment consiting of 3 containers all running the <code>nginx:mainline-alpine</code> image from <a class=link href=https://hub.docker.com/r/_/nginx/ target=_blank rel=noopener>Docker hub</a>.</p><p><strong>nginx-dep.yaml</strong> looks like this:</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span><span class=lnt>20
</span><span class=lnt>21
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=cl>apiVersion: apps/v1beta2
</span></span><span class=line><span class=cl>kind: Deployment
</span></span><span class=line><span class=cl>metadata:
</span></span><span class=line><span class=cl>  name: nginx-deployment
</span></span><span class=line><span class=cl>  labels:
</span></span><span class=line><span class=cl>    app: nginx
</span></span><span class=line><span class=cl>spec:
</span></span><span class=line><span class=cl>  replicas: 3
</span></span><span class=line><span class=cl>  selector:
</span></span><span class=line><span class=cl>    matchLabels:
</span></span><span class=line><span class=cl>      app: nginx
</span></span><span class=line><span class=cl>  template:
</span></span><span class=line><span class=cl>    metadata:
</span></span><span class=line><span class=cl>      labels:
</span></span><span class=line><span class=cl>        app: nginx
</span></span><span class=line><span class=cl>    spec:
</span></span><span class=line><span class=cl>      containers:
</span></span><span class=line><span class=cl>      - name: nginx
</span></span><span class=line><span class=cl>        image: nginx:mainline-alpine
</span></span><span class=line><span class=cl>        ports:
</span></span><span class=line><span class=cl>        - containerPort: 80
</span></span></code></pre></td></tr></table></div></div><p>Load this into the cluster with <code>kubectl create</code>:</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=cl>kubectl create -f https://raw.githubusercontent.com/StianOvrevage/gh-pages-blog/master/static/attachments/2017-12-23-managed-kubernetes-on-azure/nginx-dep.yaml
</span></span></code></pre></td></tr></table></div></div><p>This command creates the resources described in the file. <code>kubectl</code> can read files either from your local disk or from a web URL.</p><blockquote><p>After making changes to a resource definition (<code>.yaml</code> file), you can update the resources in the cluster with <code>kubetl replace -f resource.yaml</code>.</p></blockquote><p>We can verify that the Deployment is ready:</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=cl>&gt; kubectl get deploy
</span></span><span class=line><span class=cl>NAME               DESIRED   CURRENT   UP-TO-DATE   AVAILABLE   AGE
</span></span><span class=line><span class=cl>nginx-deployment   3         3         3            3           10m
</span></span></code></pre></td></tr></table></div></div><p>We can also get the actual Pods that are running:</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=cl>&gt; kubectl get pods
</span></span><span class=line><span class=cl>NAME                                READY     STATUS    RESTARTS   AGE
</span></span><span class=line><span class=cl>nginx-deployment-569477d6d8-dqwx5   1/1       Running   0          10m
</span></span><span class=line><span class=cl>nginx-deployment-569477d6d8-xwzpw   1/1       Running   0          10m
</span></span><span class=line><span class=cl>nginx-deployment-569477d6d8-z5tfk   1/1       Running   0          10m
</span></span></code></pre></td></tr></table></div></div><blockquote><p><strong>Logger</strong> We can view logs from one pod with <code>kubectl logs nginx-deployment-569477d6d8-xwzpw</code>. But since we in this case don&rsquo;t know which Pod ends up getting an incomming request we can view logs from all the Pods which have <code>app=nginx</code> label: <code>kubectl logs -lapp=nginx</code>. The use of <code>app=nginx</code> is our choice in <code>nginx-dep.yaml</code> when we configured <code>spec.template.metadata.labels: app: nginx</code>.</p></blockquote><p><a id=NginxService></a></p><h3 id=making-nginx-available-with-a-service>Making nginx available with a service</h3><p>To send traffic to our new Pods we need to create a <strong>Service</strong>. A service consists of one or more Pods which are chosen based on different criteria, for example which labels they have and whether the Pods are Running and Ready.</p><p>Lets create a service which forwards traffic to all Pods with label <code>app: nginx</code> and are listening to port 80. In addition we make the service available via a LoadBalancer:</p><p><strong>nginx-svc.yaml</strong> looks like this:</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=cl>apiVersion: v1
</span></span><span class=line><span class=cl>kind: Service
</span></span><span class=line><span class=cl>metadata:
</span></span><span class=line><span class=cl>  name: nginx
</span></span><span class=line><span class=cl>  labels:
</span></span><span class=line><span class=cl>    app: nginx
</span></span><span class=line><span class=cl>spec:
</span></span><span class=line><span class=cl>  type: LoadBalancer
</span></span><span class=line><span class=cl>  ports:
</span></span><span class=line><span class=cl>  - port: 80
</span></span><span class=line><span class=cl>    name: http
</span></span><span class=line><span class=cl>    targetPort: 80
</span></span><span class=line><span class=cl>  selector:
</span></span><span class=line><span class=cl>    app: nginx
</span></span></code></pre></td></tr></table></div></div><p>We tell Kubernetes to create our service with <code>kubectl create</code> as usual:</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=cl>kubectl create -f https://raw.githubusercontent.com/StianOvrevage/gh-pages-blog/master/static/attachments/2017-12-23-managed-kubernetes-on-azure/nginx-svc.yaml
</span></span></code></pre></td></tr></table></div></div><p>We can then wait and see which IP-address Azure assigns our service:</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=cl>&gt; kubectl get svc -w
</span></span><span class=line><span class=cl>NAME         CLUSTER-IP   EXTERNAL-IP     PORT(S)        AGE
</span></span><span class=line><span class=cl>nginx        10.0.24.11   13.95.173.255   80:31522/TCP   15m
</span></span></code></pre></td></tr></table></div></div><blockquote><p><strong>PS</strong> It can take a few minutes for Azure to allocate and assign a Public IP for us. In the mean time <code>&lt;pending></code> will appear under EXTERNAL-IP.</p></blockquote><p>A simple <strong>Welcome to nginx</strong> webpage should now be available on http://13.95.173.255 (<em>remember to replace with your own External-IP</em>).</p><p>We can also delete the service and deployment afterwards:</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=cl>kubectl delete svc nginx
</span></span><span class=line><span class=cl>kubectl delete deploy nginx-deployment
</span></span></code></pre></td></tr></table></div></div><p><a id=ScaleCluster></a></p><h3 id=scaling-the-cluster>Scaling the cluster</h3><p>If we want to change the number of agent nodes running Pods we can do that via Azure-CLI:</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=cl>az aks scale --name my_cluster --resource-group my_aks_rg --node-count 5
</span></span></code></pre></td></tr></table></div></div><blockquote><p>Currently all nodes will be created with the same size as when we created the cluster. AKS will probably get support for <a class=link href=https://cloud.google.com/kubernetes-engine/docs/concepts/node-pools target=_blank rel=noopener><strong>node-pools</strong></a> next year. That will allow for creating different groups of nodes with different size and operating systems, both Linux and Windows.</p></blockquote><p><a id=DeleteCluster></a></p><h3 id=delete-cluster>Delete cluster</h3><p>You can delete the whole cluster like this:</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=cl>az aks delete --name my_cluster --resource-group my_aks_rg --yes
</span></span></code></pre></td></tr></table></div></div><p><a id=Bonusmaterial></a></p><h2 id=bonus-material>Bonus material</h2><p>Here is some bonus material if you want to go a bit further with Kubernetes.</p><p><a id=HelmIntro></a></p><h3 id=deploying-services-with-helm>Deploying services with Helm</h3><p><a class=link href=https://helm.sh/ target=_blank rel=noopener>Helm</a> is a package manager and library of software that is ready to be deployed on a Kubernetes cluster.</p><p>Start by downloading the <a class=link href=https://github.com/kubernetes/helm/releases target=_blank rel=noopener>Helm-client</a>. It will read login information etc. from the same location as <code>kubectl</code> automatically.</p><p>Install the Helm-server (<strong>Tiller</strong>) on the Kubernetes cluster and update the package library:</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=cl>helm init
</span></span><span class=line><span class=cl>helm repo update
</span></span></code></pre></td></tr></table></div></div><p>See available packages (<strong>Charts</strong>) with <code>helm search</code>.</p><p><a id=HelmMinecraft></a></p><h4 id=deploy-minecraft-with-helm>Deploy MineCraft with Helm</h4><p>Lets deploy a MineCraft server installation on our cluster, just because we can :-)</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=cl>helm install --name stians --set minecraftServer.eula=true stable/minecraft
</span></span></code></pre></td></tr></table></div></div><blockquote><p><code>--set</code> overrides one or more of the standard values configured in the package. The MineCraft package is made in a way where it does not start without accepting the user license agreement by setting the variable <code>minecraftServer.eula</code>. All the variables that can be set in the MineCraft package are <a class=link href=https://github.com/kubernetes/charts/blob/master/stable/minecraft/values.yaml target=_blank rel=noopener>documented here</a>.</p></blockquote><p>Then we wait for Azure to assign us a Public IP:</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=cl>&gt; kubectl get svc -w
</span></span><span class=line><span class=cl>stians-minecraft   10.0.237.0   13.95.172.192   25565:30356/TCP   3m
</span></span></code></pre></td></tr></table></div></div><p>Now we can connect to our MineCraft server on <code>13.95.172.192:25565</code>!</p><p><img src=/p/managed-kubernetes-on-microsoft-azure-english/minecraft-k8s.png width=856 height=507 srcset="/p/managed-kubernetes-on-microsoft-azure-english/minecraft-k8s_hu13197832490752396686.png 480w, /p/managed-kubernetes-on-microsoft-azure-english/minecraft-k8s_hu16352153299487520650.png 1024w" loading=lazy alt="Kubernetes in MineCraft on Kubernetes" class=gallery-image data-flex-grow=168 data-flex-basis=405px></p><p><a id=KubernetesDashboard></a></p><h3 id=kubernetes-dashboard>Kubernetes Dashboard</h3><p>Kubernetes also has a graphic web user-interface which makes it a bit easier to see which resources are in the cluster, view logs and even open a remote shell inside a running Pod, among other things.</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=cl>&gt; kubectl proxy
</span></span><span class=line><span class=cl>Starting to serve on 127.0.0.1:8001
</span></span></code></pre></td></tr></table></div></div><p><code>kubectl</code> encrypts and tunnels the traffic to the Kubernetes API servers. The dashboard is available on <a class=link href=http://127.0.0.1:8001/ui/ target=_blank rel=noopener>http://127.0.0.1:8001/ui/</a>.</p><p><img src=/p/managed-kubernetes-on-microsoft-azure-english/k8s-dash.png width=899 height=588 srcset="/p/managed-kubernetes-on-microsoft-azure-english/k8s-dash_hu15091082541702636396.png 480w, /p/managed-kubernetes-on-microsoft-azure-english/k8s-dash_hu17318776918264020386.png 1024w" loading=lazy alt="Kubernetes Dashboard" class=gallery-image data-flex-grow=152 data-flex-basis=366px></p><p><a id=Conclusion></a></p><h2 id=conclusion>Conclusion</h2><p>I hope you enjoy Kubernetes as much as I have. The learning curve can be a bit steep in the beginning, but it does not take long before you are productive.</p><p>Look at the <a class=link href=https://v1-8.docs.kubernetes.io/docs/tutorials/ target=_blank rel=noopener>official guides on Kubernetes.io</a> to learn more about defining different types of resources and services to run on Kubernetes. <strong>PS: There are big changes from version to version so make sure you use the documentation for the correct version!</strong></p><p>Kubernetes also have a very active Slack-community on <a class=link href=http://slack.k8s.io/ target=_blank rel=noopener>kubernetes.slack.com</a> that is worthwhile to check out.</p></section><footer class=article-footer><section class=article-tags><a href=/tags/kubernetes/>Kubernetes</a>
<a href=/tags/azure/>Azure</a></section><section class=article-lastmod><svg class="icon icon-tabler icon-tabler-clock" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><circle cx="12" cy="12" r="9"/><polyline points="12 7 12 12 15 15"/></svg>
<span>Last updated on Dec 29, 2017 00:00 UTC</span></section></footer></article><aside class=related-content--wrapper><h2 class=section-title>Related content</h2><div class=related-content><div class="flex article-list--tile"><article class=has-image><a href=/p/mini-post-down-scaling-azure-kubernetes-service-aks/><div class=article-image><img src=/p/mini-post-down-scaling-azure-kubernetes-service-aks/2019-06-04-downscaling-aks.329aba45d5c630b3af497bbb7a43f404_hu14101488926934199810.png width=250 height=150 loading=lazy alt="Featured image of post Mini-post: Down-scaling Azure Kubernetes Service (AKS)" data-hash="md5-Mpq6RdXGMLOvSXu7ekP0BA=="></div><div class=article-details><h2 class=article-title>Mini-post: Down-scaling Azure Kubernetes Service (AKS)</h2></div></a></article><article class=has-image><a href=/p/disk-performance-on-azure-kubernetes-service-aks-part-1-benchmarking/><div class=article-image><img src=/p/disk-performance-on-azure-kubernetes-service-aks-part-1-benchmarking/2019-02-23-disk-performance-on-aks-part-1.ab18dd1b8670f56fe898797506d57abc_hu17823714411359167148.png width=250 height=150 loading=lazy alt="Featured image of post Disk performance on Azure Kubernetes Service (AKS) - Part 1: Benchmarking" data-hash="md5-qxjdG4Zw9W/omHl1BtV6vA=="></div><div class=article-details><h2 class=article-title>Disk performance on Azure Kubernetes Service (AKS) - Part 1: Benchmarking</h2></div></a></article><article class=has-image><a href=/p/managed-kubernetes-p%C3%A5-microsoft-azure-norwegian/><div class=article-image><img src=/p/managed-kubernetes-p%C3%A5-microsoft-azure-norwegian/2017-12-23-managed-kubernetes-on-azure.bf0fcb04c841710921f10d2e885d8555_hu4992157927612583129.png width=250 height=150 loading=lazy alt="Featured image of post Managed Kubernetes p√• Microsoft Azure (Norwegian)" data-hash="md5-vw/LBMhBcQkh8Q0uiF2FVQ=="></div><div class=article-details><h2 class=article-title>Managed Kubernetes p√• Microsoft Azure (Norwegian)</h2></div></a></article><article class=has-image><a href=/p/kubernetes-dont-use-nodelocal-dnscache-on-gke-without-cloud-dns/><div class=article-image><img src=/p/kubernetes-dont-use-nodelocal-dnscache-on-gke-without-cloud-dns/cover.b44ff6851020084489a2bbba9c34cdea_hu14327566051345104457.webp width=250 height=150 loading=lazy alt="Featured image of post Kubernetes: Don't use NodeLocal DNSCache on GKE (without Cloud DNS)" data-hash="md5-tE/2hRAgCESJoru6nDTN6g=="></div><div class=article-details><h2 class=article-title>Kubernetes: Don't use NodeLocal DNSCache on GKE (without Cloud DNS)</h2></div></a></article><article class=has-image><a href=/p/kubernetes-sidecar-config-drift/><div class=article-image><img src=/p/kubernetes-sidecar-config-drift/2022-05-03-kubernetes-sidecar-config-drift.099fc947effb12fa5df1b55ff2abbf0f_hu6448980740578202474.png width=250 height=150 loading=lazy alt="Featured image of post Kubernetes Sidecar Config Drift" data-hash="md5-CZ/JR+/7Evpd8bVf8qu/Dw=="></div><div class=article-details><h2 class=article-title>Kubernetes Sidecar Config Drift</h2></div></a></article></div></div></aside><div class=disqus-container></div><style>.disqus-container{background-color:var(--card-background);border-radius:var(--card-border-radius);box-shadow:var(--shadow-l1);padding:var(--card-padding)}</style><script>window.addEventListener("onColorSchemeChange",e=>{typeof DISQUS=="object"&&DISQUS.reset({reload:!0})})</script><footer class=site-footer><section class=copyright>&copy;
2014 -
2024 blog.stian.omg.lol</section><section class=powerby>Built with <a href=https://gohugo.io/ target=_blank rel=noopener>Hugo</a><br>Theme <b><a href=https://github.com/CaiJimmy/hugo-theme-stack target=_blank rel=noopener data-version=3.29.0>Stack</a></b> designed by <a href=https://jimmycai.com target=_blank rel=noopener>Jimmy</a></section></footer><div class=pswp tabindex=-1 role=dialog aria-hidden=true><div class=pswp__bg></div><div class=pswp__scroll-wrap><div class=pswp__container><div class=pswp__item></div><div class=pswp__item></div><div class=pswp__item></div></div><div class="pswp__ui pswp__ui--hidden"><div class=pswp__top-bar><div class=pswp__counter></div><button class="pswp__button pswp__button--close" title="Close (Esc)"></button>
<button class="pswp__button pswp__button--share" title=Share></button>
<button class="pswp__button pswp__button--fs" title="Toggle fullscreen"></button>
<button class="pswp__button pswp__button--zoom" title="Zoom in/out"></button><div class=pswp__preloader><div class=pswp__preloader__icn><div class=pswp__preloader__cut><div class=pswp__preloader__donut></div></div></div></div></div><div class="pswp__share-modal pswp__share-modal--hidden pswp__single-tap"><div class=pswp__share-tooltip></div></div><button class="pswp__button pswp__button--arrow--left" title="Previous (arrow left)">
</button>
<button class="pswp__button pswp__button--arrow--right" title="Next (arrow right)"></button><div class=pswp__caption><div class=pswp__caption__center></div></div></div></div></div><script src=https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe.min.js integrity="sha256-ePwmChbbvXbsO02lbM3HoHbSHTHFAeChekF1xKJdleo=" crossorigin=anonymous defer></script><script src=https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe-ui-default.min.js integrity="sha256-UKkzOn/w1mBxRmLLGrSeyB4e1xbrp4xylgAWb3M42pU=" crossorigin=anonymous defer></script><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/default-skin/default-skin.min.css crossorigin=anonymous><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe.min.css crossorigin=anonymous></main></div><script src=https://cdn.jsdelivr.net/npm/node-vibrant@3.1.6/dist/vibrant.min.js integrity="sha256-awcR2jno4kI5X0zL8ex0vi2z+KMkF24hUW8WePSA9HM=" crossorigin=anonymous></script><script type=text/javascript src=/ts/main.1e9a3bafd846ced4c345d084b355fb8c7bae75701c338f8a1f8a82c780137826.js defer></script><script>(function(){const e=document.createElement("link");e.href="https://fonts.googleapis.com/css2?family=Lato:wght@300;400;700&display=swap",e.type="text/css",e.rel="stylesheet",document.head.appendChild(e)})()</script></body></html>